<!DOCTYPE html>
<html lang="en">
  

	</head>

	<title>Login</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	
	<link rel="stylesheet" href="css/style.css">
	
	 
	

	</head>


	<body class="img js-fullheight" style="background-image: url(img/bg.jpg);">
		
	<section class="ftco-section">
		<div class="container">

			<div class="row justify-content-center"><!--TITULO-->
				<div class="col-md-6 text-center mb-5">
					<h2 class="heading-section">Login</h2> 
				</div>
			</div>
			<div class="row justify-content-center"><!--card login-->
				<div class="col-md-6 col-lg-4">
					<div class="login-wrap p-0">
		      	<h3 class="mb-4 text-center">Acesse sua conta</h3> <!--titulo-->
		      	<form action="#" class="signin-form">
		      		<div class="form-group"><!--email-->
		      			<input type="email" name="email"  id="email" validateFields() class="form-control" placeholder="E-mail" required>
		      		</div>
	            <div class="form-group"><!--senha-->
	              <input id="pass" name="password" type="password" class="form-control" placeholder="Senha" required>
	              <span toggle="#password-field" class="fa fa-fw fa-eye field-icon toggle-password"></span>
	            </div>
	            <div class="form-group"><!--BTN cadastrar-->
	            	<button type="button" id="data"   class="form-control btn btn-primary submit px-3">Sign Up</button>
	            </div>
	            <div class="form-group d-md-flex"><!--lembrar ou  recuperar-->
	            	<div class="w-50"><!--lembrar-->
		            	<label class="checkbox-wrap checkbox-primary">Lembar login
									  <input type="checkbox" checked>
									  <span class="checkmark"></span>
									</label>
								</div>
								<div class="w-50 text-md-right"><!--recuperar-->
									<button href="#" style="background-color: transparent; border: 0; color:white ;">Recuperar Senha</button>
								</div>
	            </div>
	          </form>
	          <p class="w-100 text-center">&mdash; Login com &mdash;</p>
	          <div class="social d-flex text-center"><!--REdes Sociais-->
	          	<a href="#" class="px-2 py-2 mr-md-1 rounded"><span class="ion-logo-facebook mr-2"></span> Facebook</a>
	          	<a href="#" class="px-2 py-2 ml-md-1 rounded"><span class="ion-logo-twitter mr-2"></span> Google</a>
	          </div>
		      </div>
				</div>
			</div>
		</div>
	</section>

	</body>
    <footer>
        <div class="card text-center">
            <div class="card-header">
                PAGINA DE LOGIN
            </div>
            <div class="card-body">
              <h5 class="card-title">TESTE</h5>
              <p class="card-text">GUILHERME IBANEZ</p>
             
            </div>
            <div class="card-footer text-body-secondary">
            
            </div>
          </div>
        
    </footer>
</html>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
 import { getAuth,
   createUserWithEmailAndPassword,  
   signInWithEmailAndPassword,
  signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";;
 import { getDatabase,set,ref,update } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCJTg2rz92dWFkrfyc0Ubat9e7hHpk2U80",
    authDomain: "authentication-6dda7.firebaseapp.com",
    projectId: "authentication-6dda7",
    storageBucket: "authentication-6dda7.appspot.com",
    messagingSenderId: "476318689835",
    appId: "1:476318689835:web:f8f839994b422b619e986e"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const database = getDatabase(app);

data.addEventListener('click',(e)=> {
  
var email = document.getElementById('email').value;
var password = document.getElementById('pass').value;

 /* createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed up 
    const user = userCredential.user;
    // ... usse
    set(ref(database, 'users/' + user.uid), {
    email: email,
   password: password,
  })
  .then(() => {
  // Data saved successfully!
  alert("Criado com sucesso!")
})
.catch((error) => {
  // The write failed...
  alert(error)
});
   
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    // ..
    alert(errorMessage);
  });*/

  signInWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    // ...
    var lgDate = new Date();
    update(ref(database, 'users/' + user.uid), {
    last_login: lgDate,
   password: password,
  })
  .then(() => {
  // Data saved successfully!
  alert("logado com sucesso!")
 
})
.catch((error) => {
  // The write failed...
  
});
  })
  .catch((error) => {
    
    alert("Email ou senha invalidos!");
  });

  signOut(auth).then(() => {

  }).catch((error) => {

  });

});

</script>
